(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5628)}])},5628:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(5893),a=n(7294),o=n(5333),i=n(5796),s=n(8456),c=n(7837),l=n(6154);let d=async e=>{let t=await l.Z.get("".concat("https://dl.dropbox.com/s").concat(e));return t.data},u={"1_TO_2":"/dbfb35noxz0fplx/output_1%2C2.csv","3_TO_4":"/n2mrrelsd4mf947/output_3%2C4.csv","5_TO_6":"/o4eo7c0modmmzyc/output_5%2C6.csv",TO_7:"/v77hvxm27faqes4/output_to_7.csv","7_TO_9":"/3hqc6chywzy1dez/output_to_7%2C8%2C9.csv","10_TO_12":"/ieo4a6aa5b909ac/output_to_10%2C11%2C12.csv"},h=[{id:"1_TO_2",name:"一至二年級"},{id:"3_TO_4",name:"三至四年級"},{id:"5_TO_6",name:"五至六年級"},{id:"TO_7",name:"至七年級"},{id:"7_TO_9",name:"七至九年級"},{id:"10_TO_12",name:"十至十二年級"}];var _=n(9008),p=n.n(_),f=n(526),g=n(5945);let x=e=>{let{children:t}=e,[n]=a.useState(()=>new f.S({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p(),{children:[(0,r.jsx)("title",{children:"均一教育平台"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,r.jsx)("meta",{httpEquiv:"Content-Language",content:"zh_TW"})]}),(0,r.jsx)(g.aH,{client:n,children:t})]})};var m=n(3311),v=n.n(m),j=n(1054);let b=e=>{let{options:t,nodes:n,edges:r}=e,[o,i]=(0,a.useState)(null),s=(0,a.useRef)(null),c={nodes:n,edges:r};return(0,a.useEffect)(()=>{if(0!==n.length&&0!==r.length){if(s.current){let e=new j.Network(s.current,c,t);i(e)}return()=>null==o?void 0:o.destroy()}},[r,n,t]),{network:o,ref:s}},w={nodes:{color:{background:"lightgray",hover:"SILVER",highlight:"SILVER"},borderWidth:0},edges:{arrows:"to",arrowStrikethrough:!1,smooth:!1},layout:{hierarchical:{enabled:!0,direction:"UD",edgeMinimization:!0,levelSeparation:350,nodeSpacing:350,blockShifting:!0,parentCentralization:!0,sortMethod:"directed"}},physics:{enabled:!1},height:"1000px"},y=e=>{let{roadMapData:t}=e,{ref:n,network:o}=b({options:w,edges:t.edges,nodes:t.nodes}),i=e=>{let n=e.nodes[0];if(n){let e=v()(t.nodes,{id:n});console.log(e)}};return(0,a.useEffect)(()=>{if(o)return o.on("click",i),o.fit(),o.focus(t.nodes[0].id,{scale:1}),()=>o.off("click",i)},[o]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{height:700,width:"100%"},ref:n})})};var O=n(913),T=n(3841),C=n(1439),S=n(7058),k=n(4509),E=n(52);let Z=e=>{let{label:t,helperText:n,FormControlProps:a={},InputLabelProps:o={},InputProps:i={},SelectProps:s={},FormHelperTextProps:c={},className:l,children:d,color:u="primary",size:h="small",paperMaxHeight:_="auto",error:p=!1,hasLabel:f=!0,hasShrink:g=!1,value:x="",disabled:m=!1}=e,{sx:v=[],...j}=a,{sx:b=[],...w}=c;return(0,r.jsxs)(O.Z,{sx:[...Array.isArray(v)?v:[v]],size:h,disabled:m,error:p,color:u,className:l,...j,children:[f&&(0,r.jsx)(T.Z,{color:u,shrink:!!g||void 0,...o,children:t}),(0,r.jsx)(C.Z,{value:x,label:f?t:void 0,MenuProps:{PaperProps:{sx:{maxHeight:_}},disableAutoFocusItem:!0,anchorOrigin:{vertical:2,horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},input:(0,r.jsx)(S.Z,{color:u,label:f?t:void 0,disabled:m,...i}),...s,children:d}),!!n&&(0,r.jsx)(k.Z,{sx:[{["&.".concat(E.Z.root)]:{marginLeft:0}},...Array.isArray(b)?b:[b]],...w,children:n})]})},z=()=>{var e;let[t,n]=(0,a.useState)(Object.keys(u)[0]),{data:l,isSuccess:_,isLoading:p}=(e=u[t],(0,c.a)({queryKey:["getUserProgressCacheEndpoint",e],queryFn:()=>d(e)})),[f,g]=(0,a.useState)({edges:[],nodes:[]});(0,a.useEffect)(()=>{if(!p&&_&&l){let e=l.split("\n"),t=new Set,n={nodes:[],edges:[]};for(let r=1;r<e.length;r++){let a=e[r].replace(/\r/g,"").split(",");a[2]&&(t.has(a[2])||(t.add(a[2]),n.nodes.push({id:a[2],label:"".concat(a[0]," - ").concat(a[1]),name:"".concat(a[2]," - ").concat(a[0],"-").concat(a[1])})),a[5]&&(t.has(a[5])||(t.add(a[5]),n.nodes.push({id:a[5],label:"".concat(a[3]," - ").concat(a[4]),name:"".concat(a[5]," - ").concat(a[3],"-").concat(a[4])})),n.edges.push({from:a[2],to:a[5]})))}g(n)}},[l]);let x=e=>{n(e.target.value)};return(0,r.jsxs)(o.Z,{sx:{width:"100%",height:"100%"},children:[(0,r.jsxs)(Z,{value:t,helperText:"選擇班級",SelectProps:{onChange:x},paperMaxHeight:330,children:[(0,r.jsx)(i.Z,{value:"none",disabled:!0,children:"請選擇班級"}),h.map(e=>(0,r.jsx)(i.Z,{value:e.id,children:e.name},e.id))]}),p?(0,r.jsx)(o.Z,{children:(0,r.jsx)(s.Z,{sx:{marginTop:"50px"}})}):(0,r.jsx)(y,{roadMapData:f})]})};z.getLayout=function(e){return(0,r.jsx)(x,{children:e})};var N=z}},function(e){e.O(0,[814,959,636,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);