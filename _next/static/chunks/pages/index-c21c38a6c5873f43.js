(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6853)}])},6853:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(5893),i=n(7294),o=n(3311),c=n.n(o),s=n(7837),a=n(6154);let l=async()=>{let e=await a.Z.get("https://dl.dropbox.com/s/gtycnw048vvdqer/output567.csv");return e.data};var d=n(1054);let u=e=>{let{options:t,nodes:n,edges:r}=e,[o,c]=(0,i.useState)(null),s=(0,i.useRef)(null),a={nodes:n,edges:r};return(0,i.useEffect)(()=>{if(0!==n.length&&0!==r.length){if(s.current){let e=new d.Network(s.current,a,t);c(e)}return()=>null==o?void 0:o.destroy()}},[r,n,t]),{network:o,ref:s}};var h=n(9008),f=n.n(h),g=n(526),p=n(5945);let w=e=>{let{children:t}=e,[n]=i.useState(()=>new g.S({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f(),{children:[(0,r.jsx)("title",{children:"均一教育平台"}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,r.jsx)("meta",{httpEquiv:"Content-Language",content:"zh_TW"})]}),(0,r.jsx)(p.aH,{client:n,children:t})]})},v={nodes:{color:{background:"lightgray",hover:"SILVER",highlight:"SILVER"},borderWidth:0},edges:{arrows:"to",arrowStrikethrough:!1,smooth:!1},layout:{hierarchical:{enabled:!0,direction:"UD",edgeMinimization:!0,levelSeparation:350,nodeSpacing:350,blockShifting:!0,parentCentralization:!0,sortMethod:"directed"}},physics:{enabled:!1},height:"1000px"},S=()=>{let{data:e,isSuccess:t}=function(){let e=(0,s.a)({queryKey:["getUserProgressCacheEndpoint"],queryFn:()=>l()});return{data:null==e?void 0:e.data,isLoading:null==e?void 0:e.isLoading,isSuccess:null==e?void 0:e.isSuccess,refetch:null==e?void 0:e.refetch}}(),[n,o]=(0,i.useState)({edges:[],nodes:[]}),{ref:a,network:d}=u({options:v,edges:n.edges,nodes:n.nodes});(0,i.useEffect)(()=>{if(t&&e){let t=e.split("\n"),n=new Set,r={nodes:[],edges:[]};for(let e=1;e<t.length;e++){let i=t[e].replace(/\r/g,"").split(",");r.edges.push({from:i[2],to:i[5]}),n.has(i[2])||(n.add(i[2]),r.nodes.push({id:i[2],label:"".concat(i[0],"-").concat(i[1]),name:"".concat(i[2],"-").concat(i[0],"-").concat(i[1])})),n.has(i[5])||(n.add(i[5]),r.nodes.push({id:i[5],label:"".concat(i[3],"-").concat(i[4]),name:"".concat(i[5],"-").concat(i[3],"-").concat(i[4])}))}o(r)}},[e]);let h=e=>{let t=e.nodes[0];if(t){let e=c()(n.nodes,{id:t});console.log(e)}};return(0,i.useEffect)(()=>{if(d)return d.on("click",h),()=>d.off("click",h)},[d]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{height:700,width:"100%"},ref:a})})};S.getLayout=function(e){return(0,r.jsx)(w,{children:e})};var _=S}},function(e){e.O(0,[814,959,453,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);