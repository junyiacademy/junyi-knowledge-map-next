(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6853)}])},6853:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n(5893),o=n(7294),r=n(3311),c=n.n(r),s=n(7837),a=n(6154);let l=async()=>{let e=await a.Z.get("https://dl.dropbox.com/s/gtycnw048vvdqer/output567.csv");return e.data};var d=n(1054);let u=e=>{let{options:t,nodes:n,edges:i}=e,[r,c]=(0,o.useState)(null),s=(0,o.useRef)(null),a={nodes:n,edges:i};return(0,o.useEffect)(()=>{if(0!==n.length&&0!==i.length){if(s.current){let e=new d.Network(s.current,a,t);c(e)}return()=>null==r?void 0:r.destroy()}},[i,n,t]),{network:r,ref:s}};var h=n(9008),f=n.n(h),g=n(526),p=n(5945);let w=e=>{let{children:t}=e,[n]=o.useState(()=>new g.S({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(f(),{children:[(0,i.jsx)("title",{children:"均一教育平台"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,i.jsx)("meta",{httpEquiv:"Content-Language",content:"zh_TW"})]}),(0,i.jsx)(p.aH,{client:n,children:t})]})},v={nodes:{color:{background:"lightgray",hover:"SILVER",highlight:"SILVER"},borderWidth:0},edges:{arrows:"to",arrowStrikethrough:!1,smooth:!1},layout:{hierarchical:{enabled:!0,direction:"UD",edgeMinimization:!0,levelSeparation:350,nodeSpacing:350,blockShifting:!0,parentCentralization:!0,sortMethod:"directed"}},physics:{enabled:!1},height:"1000px"},S=()=>{let{data:e,isSuccess:t}=function(){let e=(0,s.a)({queryKey:["getUserProgressCacheEndpoint"],queryFn:()=>l()});return{data:null==e?void 0:e.data,isLoading:null==e?void 0:e.isLoading,isSuccess:null==e?void 0:e.isSuccess,refetch:null==e?void 0:e.refetch}}(),[n,r]=(0,o.useState)({edges:[],nodes:[]}),{ref:a,network:d}=u({options:v,edges:n.edges,nodes:n.nodes});(0,o.useEffect)(()=>{if(t&&e){let t=e.split("\n"),n=new Set,i={nodes:[],edges:[]};for(let e=1;e<t.length;e++){let o=t[e].replace(/\r/g,"").split(",");i.edges.push({from:o[2],to:o[5]}),n.has(o[2])||(n.add(o[2]),i.nodes.push({id:o[2],label:"".concat(o[0],"-").concat(o[1]),name:"".concat(o[2],"-").concat(o[0],"-").concat(o[1])})),n.has(o[5])||(n.add(o[5]),i.nodes.push({id:o[5],label:"".concat(o[3],"-").concat(o[4]),name:"".concat(o[5],"-").concat(o[3],"-").concat(o[4])}))}r(i)}},[e]);let h=e=>{let t=e.nodes[0];if(t){let e=c()(n.nodes,{id:t});console.log(e)}};return(0,o.useEffect)(()=>{if(d)return d.on("click",h),d.fit(),d.focus(n.nodes[0].id,{scale:1}),()=>d.off("click",h)},[d]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{style:{height:700,width:"100%"},ref:a})})};S.getLayout=function(e){return(0,i.jsx)(w,{children:e})};var _=S}},function(e){e.O(0,[814,959,453,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);